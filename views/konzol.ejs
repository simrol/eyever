<!doctype html>
<html lang="en">
  <head>
    <title>Eyever</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="https://kit.fontawesome.com/c0fc838bea.js" crossorigin="anonymous"></script>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="style.css">
</head>
  <body>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #f4f4f4;
        }

        table {
            border-collapse: collapse;
            width: 50%;
            margin-top: 10px;
            margin-bottom: 20px; /* Új sor - a táblázat aljától való távolság */
        }

        th, td {
            padding: 12px;
            text-align: left;
            border: 1px solid #ddd;
        }

        th {
            background-color: #f2f2f2;
        }

        .terminal-container {
            position: fixed;
            bottom: auto;
            left: 65%;
            transform: translateX(-90%);
            background-color: black;
            color: white;
            border-radius: 5px;
            padding: 15px;
            display: block;
            z-index: 1000;
            font-family: monospace;
            white-space: pre-wrap;
            max-width: 4000px;
            max-height: 2000px;
            overflow-y: auto;
            overflow-scrolling: touch;
            overscroll-behavior: none;
        }

        .terminal {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .good {
            color: green;
        }

        .warning {
            color: orange;
        }

        .critical {
            color: red;
        }
    </style>
     <!---Nav bar-->
      <nav class="navbar navbar-expand-md navbar-light">
<button class="navbar-toggler ml-auto mb-2 bg-light" type="button" 
data-toggle="collapse" data-target="#navbar">
<span class="navbar-toggler-icon"></span>

</button>
<div class="collapse navbar-collapse" id="navbar">
    <div class="container-fluid">
        <div class="row">
            <!---Sidebar-->
            <div class=" col-xl-2 col-lg-3 col-md-4 sidebar fixed-top">
                <br><br><br>
                <div class="bottom-border pb-3">
                    
                    <a href="#" class="text-white "><span id="computerName">Nincs adat</span></a>
                </div>
                <ul class="navbar-nav flex-column mt-4">
                   <li class="nav-item"><a href="/dashboard" class="nav-link text-white p-3 mb-2
                    sidebar-link"><i class="fas fa-home text-light fa-lg mr-3"></i>
                Kezelőfelület</a></li>
                <li class="nav-item"><a href="/console" class="nav-link text-white p-3 mb-2
                    current">
                Konzol</a></li>
                <li class="nav-item"><a href="/storage" class="nav-link text-white p-3 mb-2
                    sidebar-link">
                Tárhely kezelése</a></li>
                <li class="nav-item"><a href="#" class="nav-link text-white p-3 mb-2
                    sidebar-link"><i class="fas fa-shopping-cart text-light fa-lg mr-3"></i>
                Sales</a></li>
                <li class="nav-item"><a href="#" class="nav-link text-white p-3 mb-2
                    sidebar-link"><i class="fas fa-chart-line text-light fa-lg mr-3"></i>
                Analytics</a></li>
                
                </ul>

            </div>
            <!---end of side bar-->
            <!---Top Nav-->
<div class="col-xl-10 col-lg-9 col-md-8 ml-auto top-bar fixed-top py-2 top-nav">
    <div class="row align-item-center">
   <div class="col-md-4">
 <h4 class="text-light text-uppercase mb-0">Konzol</h4>
   </div>
   <div class="col-md-5">

   </div>
   <div class="col-md-3">
       <ul class="navbar-nav">
           <li class="nav-item icon-parent"><a href="#" class="nav-link icon-bullet">
            <i class="fas fa-comments text-light fa-lg"></i></a>
            <li class="nav-item icon-parent"><a href="#" class="nav-link icon-bullet">
             <i class="fas fa-bell text-light fa-lg"></i></a>
             <li class="nav-item ml-md-auto"><a href="#"class="nav-link"
            data-toggle="modal" data-target="#sign-out">
             <i class="fas fa-sign-out-alt text-danger fa-lg"></i></a>
       </ul>
   </div>
        </div>
</div>
            <!---End of Top Nav-->
        </div>
    </div>
</div>
      </nav>
      
    </div>
      <!----End of Navbar-->
      <!---Modal-->
      <div class="modal" id="sign-out">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Kikapcsolás</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    Biztos ki szeretnéd kapcsolni a szervert távolról?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-dismiss="modal" id="leaveBtn">
                        Kikapcsolás
                    </button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal">
                        Mégsem
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

<!-- Bootstrap JS, Popper.js, and jQuery -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <script>
        // JavaScript kód a modal bezárásának figyelésére és átirányítás végrehajtására
        $(document).ready(function () {
            $('#leaveBtn').on('click', function () {
                // Itt megadhatod az átirányítás helyét (pl.: 'index.html')
                window.location.href = '/powerkill';
            });
        });
    </script>
      <!---End of Modal-->
      <!---Cards-->
     
    <section>
        <div class="terminal-container">
        <div class="terminal" id="terminal">------- Üdv a terminálban! ----------<br></div>
    </div>
        
        <script>
            function updateResourceUsage() {
                   fetch('/system')
                       .then(response => response.json())
                       .then(data => {
                           updateRow('cpu-usage', 'Processzor', data.cpuUsage.toFixed(2) + '%');
                           updateRow('memory-usage', 'Memória', data.memoryUsage.toFixed(2) + '%');
           
                           setTimeout(updateResourceUsage, 1000);
           
                           if (data.cpuUsage > 80.0 || data.memoryUsage > 80.0) {
                               addToTerminal(`[Rendszer]: Magas aktív használat! CPU: ${data.cpuUsage.toFixed(2)}%, Memória: ${data.memoryUsage.toFixed(2)}%`);
                           }
                       })
                       .catch(error => console.error('Sikertelen lekérés:', error));
               }
           
               function updateRow(rowId, resourceName, usage) {
                   const row = document.getElementById(rowId);
                   row.innerHTML = `
                       <td>${resourceName}</td>
                       <td class="${getUsageColor(usage)}">${usage}</td>
                   `;
               }
           
               function getUsageColor(usage) {
                   if (parseFloat(usage) < 70) {
                       return 'good';
                   } else if (parseFloat(usage) < 90) {
                       return 'warning';
                   } else {
                       return 'critical';
                   }
               }
           
               function addToTerminal(message) {
                   const terminal = document.getElementById('terminal');
                   terminal.innerHTML += `${message}\n`;
                   terminal.scrollTop = terminal.scrollHeight;
               }
           
               document.querySelector('.terminal').addEventListener('touchmove', function(e) {
                   if (e.touches.length > 1) {
                       e.preventDefault();
                   }
               });
           
               updateResourceUsage();
               function appendToTerminal(message) {
                   const terminal = document.getElementById('terminal');
                   terminal.innerText += '\n' + message;
                   terminal.scrollTop = terminal.scrollHeight;
               }
           
               // Kezdeti üzenet
               appendToTerminal('---------- Itt fognak megjelenni az aktuális hibák,értesítések. -----------');</script>
    </section>

      <!---End of Cards-->
      <!--table-->

      <!---End of Quick post-->
      <!----Footer-->

      <!---End of Footer-->
      
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </body>
</html>
<style>body{
    font-family: Arial, Helvetica, sans-serif;
    background-color: white;
}
/*nav bar*/
.sidebar {
height: 100vh;
background-color: #455783;

background-position: center;
background-repeat: no-repeat;
background-size: cover;
box-shadow:black;
}
.bottom-border {
border-bottom: 5px dotted white;
}
.sidebar-link{
    transition: all .4s;
}
.sidebar-link:hover{
    background-color:#C62828;
    border-radius: 5px;
}
.current{
    background-color:#B71C1C;
    border-radius: 8px;
    box-shadow: 2px 5px 5px white;
    transition: all .3s;
}
.current:hover{
    background-color:#C62828;
    border-radius: 8px;
    box-shadow: 2px 5px 5px white;
    transform: transform: translateY(-1px);
}

.top-bar {
background-color:#455783;
}
/*input:placeholder{
    color: white;
    opacity: 1;
}*/
.search-input{
    background: transparent;
    
    border: none;
    border-radius: 0;
    border-bottom:2px solid #B71C1C;
    transition: all .4s;
}
.search-input:focus{
    background: transparent;
    box-shadow: none;
    border-bottom: 2px solid #B71C1C;
}
.search-button{
    border-radius: 50%;
    padding: 10px 16px;  
    transition: all .4s; 
}
.search-button:hover {
    background-color: white;
    transform: translateY(-1px);
}
.icon-parent{
position: relative;
}
.icon-bullet ::after{
    content: "";
    position: absolute;
    top: 7px;
    left: 15px;
    height: 12px;
    width: 12px;
    background-color:#B71C1C;
border-radius: 50%;
}
@media (max-width: 768px){
    .sidebar {
        position: static;
        height: auto;
    }
    .top-nav{
        position: static;
    }
}
/*Cards*/
.card-common{
    box-shadow: 1px 2px 5px gray;
   transition: all .4s; 
}
.card-common:hover {
    box-shadow: 2px 3px 15px gray;
    transform: translateY(-1px);
}
/*End of cards*/
.table-color{
    background:#DCEDC8;
}
.bg-progress{
    background: #C5E1A5;
}

.page-item{
    color: #455783;
}
.page-link{
    color: #455783;
    
}
.page-item.active .page-link{
    background-color:#455783;
    border-color: #455783;
    box-shadow: none;
}
/*task list*/
.task-border{
    border-left: 3px solid #455783;
}

.bg-1{
    background-color: #DCEDC8;
}
.bg-2{
background-color: #C5E1A5;
}
.bg-3{
    background-color: #DCEDC8;
}
.bg-4{
    background-color: #C5E1A5;
}
/*End of task list*/
.bg-button{
  background:  #455783;
}
.bd-bottom{
    border-bottom: 6px solid #455783;
}
input.form-control{
    color: white;
}
</style><script>
    // Aszinkron módon lekérjük a gép nevét
    fetch('/computerName')
        .then(response => response.json())
        .then(data => {
            // Betöltjük a gép nevét az HTML elembe
            document.getElementById('computerName').textContent = '' + data.computerName;
        })
        .catch(error => console.error('Hiba történt a gazdagépnév lekérése közben:', error));
</script>
